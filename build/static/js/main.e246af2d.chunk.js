(this["webpackJsonpnext-trip"]=this["webpackJsonpnext-trip"]||[]).push([[0],{15:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var c=n(18),r=n.n(c),s=n(6),i=n(14),o=n(0),a=n(52),u=n(3),d=n(20),j=Object(d.b)({name:"counter",initialState:{route:null,directions:[],stops:[],isLoaded:!0},reducers:{updateRoute:function(t,e){t.route=e.payload},updateDirections:function(t,e){t.directions=e.payload},updateStops:function(t,e){t.stops=e.payload},updateIsLoaded:function(t,e){t.loading=e.payload}}}),l=j.actions,b=l.updateRoute,p=l.updateDirections,O=l.updateStops,h=(l.updateIsLoaded,j.reducer),f=(n(15),n(2));function m(t){var e=Object(u.g)(),n=Object(s.b)(),c=Object(s.c)((function(t){return t.transit.route})),r=Object(s.c)((function(t){return t.transit.directions})),i=function(s){var i,o,a=Number(s.target.id),u=r.map((function(t){return{id:t.id,name:t.name,isSelected:t.id===a}}));n(p(u)),t.setIsLoaded(!1),(i=c.id,o=a,fetch("https://svc.metrotransit.org/nextripv2/stops/".concat(i,"/").concat(o)).then((function(t){return t.json()}))).then((function(c){t.setIsLoaded(!0);var r=c.map((function(t){return t.description}));n(O(r)),e.push("/stops")}),(function(e){t.setError(e),t.setIsLoaded(!0)}))};return Object(f.jsxs)("div",{className:"button-container",children:[r[0]&&Object(f.jsx)("button",{id:r[0].id,value:r[0].name,onClick:i,children:r[0].name}),r[1]&&Object(f.jsx)("button",{id:r[1].id,value:r[1].name,onClick:i,children:r[1].name})]})}function x(){var t=Object(s.b)(),e=Object(o.useState)(null),n=Object(i.a)(e,2),c=n[0],r=n[1],u=Object(o.useState)(!1),d=Object(i.a)(u,2),j=d[0],l=d[1],O=Object(o.useState)([]),h=Object(i.a)(O,2),x=h[0],v=h[1],g=Object(s.c)((function(t){return t.transit.route}));return Object(o.useEffect)((function(){fetch("https://svc.metrotransit.org/nextripv2/routes").then((function(t){return t.json()})).then((function(t){l(!0),v(t)}),(function(t){l(!0),r(t)}))}),[]),c?Object(f.jsxs)("div",{children:["Error: ",c.message]}):j?Object(f.jsxs)("div",{className:"route-select-container","data-testid":"metro-routes",children:[Object(f.jsxs)("select",{id:"routes","data-testid":"route-select",name:"routes",onChange:function(e){var n=e.target.options.selectedIndex,c=e.target.options[n].getAttribute("id"),s=e.target.options[n].value;t(b({id:c,name:s})),function(t){return fetch("https://svc.metrotransit.org/nextripv2/directions/".concat(t)).then((function(t){return t.json()}))}(c).then((function(e){l(!0);var n=e.map((function(t){return{id:t.direction_id,name:t.direction_name,isSelected:!1}}));t(p(n))}),(function(t){l(!0),r(t)}))},value:g?g.name:"select route",children:[Object(f.jsxs)("option",{disabled:!0,value:"select route",children:[" ","Select a route"]}),x.map((function(t,e){return Object(f.jsx)("option",{id:t.route_id,value:t.route_label,children:t.route_label},e)}))]}),Object(f.jsxs)(m,{setIsLoaded:l,children:[" setError=",r]})]}):Object(f.jsx)(a.a,{className:"spinner","data-testid":"spinner"})}var v=n(16),g=n.p+"static/media/metro_transit.9a816f81.jpg";function S(){var t=Object(u.g)();return Object(f.jsx)("img",{className:"logo",src:g,alt:"Logo",onClick:function(){return t.push("/")}})}function N(){return Object(f.jsxs)("div",{className:"header-container",children:[Object(f.jsx)(S,{}),Object(f.jsx)("h1",{className:"header-text",children:"Metro Transit Stop Finder"})]})}function I(){var t=Object(s.c)((function(t){return t.transit.route})),e=Object(s.c)((function(t){return t.transit.directions.find((function(t){return t.isSelected}))})),n=Object(s.c)((function(t){return t.transit.stops}));return n.length<=0?Object(f.jsx)(u.a,{to:"/"}):Object(f.jsx)("div",{className:"stops-container",children:Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsx)("tr",{children:Object(f.jsxs)("th",{children:[t&&t.name," -"," ",e&&e.name+" Stops"]})})}),n.map((function(t,e){return Object(f.jsx)("tbody",{children:Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:t})})},e)}))]})})}function L(){return Object(f.jsx)(v.a,{children:Object(f.jsxs)("div",{className:"app-container",children:[Object(f.jsx)(N,{}),Object(f.jsxs)(u.d,{className:"bottom",children:[Object(f.jsx)(u.b,{path:"/stops",children:Object(f.jsx)(I,{})}),Object(f.jsx)(u.b,{path:"/",children:Object(f.jsx)(x,{})})]})]})})}var y=Object(d.a)({reducer:{transit:h}}),_=document.getElementById("root");r.a.render(Object(f.jsx)(s.a,{store:y,children:Object(f.jsx)(L,{})}),_)}},[[40,1,2]]]);
//# sourceMappingURL=main.e246af2d.chunk.js.map